# 2 Python数据分析之Numpy

[numpy文档](https://numpy.org/doc/stable/reference/index.html)

NumPy是Python的一种开源的数值计算扩展。这种工具可用来存储和处理大型矩阵，比Python自身的嵌套列表(nested list structure)结构要高效的多。

NumPy(Numeric Python)提供了许多高级的数值编程工具。Numpy的一个重要特性是它的**数组计算**，是我们做数据分析必不可少的一个包。

## 2.0 速查表

![40461ec355823b242c8565c57bdca77.png](https://aquazone.oss-cn-guangzhou.aliyuncs.com/40461ec355823b242c8565c57bdca77.png)

## 2.1 导入Numpy
导入python库使用关键字import，后面可以自定义库的简称，但是一般都将Numpy命名为np，pandas命名为pd。
```python
import numpy
import numpy as np # 导入整个库并取别名
```

## 2.2 Numpy的数组对象及其索引
### 2.2.1 数组上的数学操作
如果我们想让列表中的每个元素+1，但列表并不支持a+1

用推导式：

```python
[x+1 for x in a]
```



如果想令数组相加，得到对应元素相加的结果，并不是我们所想要的，而是merge了

我们用推导式：

```python
[x+y for(x,y) in zip(a,b)]  #都需要利用到列表生成式
```

这样操作比较麻烦，而且数据量大的时候会很耗时。

但是我们有**Numpy**！

```python
a = np.array([1,2,3,4])
a

# array([1, 2, 3, 4])
```



```python
a+1

# array([2, 3, 4, 5])
```



```python
a*2

# array([2, 4, 6, 8])
```



### 2.2.2 产生数组

#### 2.2.2.1 从列表产生数组

```python
l = [0,1,2,3]
a = np.array(l)
a

# array([0, 1, 2, 3])
```



#### 2.2.2.2 从列表传入

```python
a = np.array([1,2,3,4])
a

# array([1, 2, 3, 4])
```



#### 2.2.2.3 生成全0数组：

```python
np.zeros(5) #括号内传个数，默认浮点数

# array([0., 0., 0., 0., 0.])
```



#### 2.2.2.4 生成全1数组：

```python
np.ones(5) #括号内传个数，默认浮点数

# array([1., 1., 1., 1., 1.])
```

```python
np.ones(5,dtype="bool") #可以自己指定类型，np.zeros函数同理

# array([ True,  True,  True,  True,  True])
```

与列表不同，**数组中要求所有元素的 dtype 是一样的**，如果传入参数的类型与数组类型不一样，需要按照已有的类型进行转换。

#### 2.2.2.5 可以使用 fill 方法将数组设为指定值

```python
a = np.array([1,2,3,4])
a.fill(5) #让数组中的每一个元素都等于5
a

# array([5, 5, 5, 5])
```

```python
a.fill(2.5) #自动进行取整
a

# array([2, 2, 2, 2])
```
```python
a = a.astype("float") #强制类型转换
a.fill(2.5)
a

# array([2.5, 2.5, 2.5, 2.5])
```



还可以使用一些特定的方法生成特殊的数组:

#### 2.2.2.6 生成特殊数组
```python
# 生成整数数列
a = np.arange(1,10) # 左闭右开区间，和range的使用方式同理
a
# array([1.3, 2.3, 3.3, 4.3, 5.3, 6.3, 7.3, 8.3, 9.3])

# 生成等差数列
a = np.linspace(1,10,21) #右边是包括在里面的，从a-b一共c个数的等差数列，其实np.arange也可以做,利用步长便可，但linspace的第三参数是元素个数
a
"""
array([1.  ,  1.45,  1.9 ,  2.35,  2.8 ,  3.25,  3.7 ,  4.15,  4.6 ,
         5.05,  5.5 ,  5.95,  6.4 ,  6.85,  7.3 ,  7.75,  8.2 ,  8.65,
         9.1 ,  9.55, 10.  ])
"""
        
# 生成随机数
np.random.rand(10)
"""
array([0.48272736, 0.00581325, 0.16110313, 0.52234425, 0.63905254,
       0.42691432, 0.37196789, 0.57188523, 0.46437865, 0.43126794])
"""

# 标准正态分布
np.random.randn(10) 
"""
array([-1.4237624 ,  1.63058904, -1.9223658 ,  0.17736421,  0.54337908,
       -1.46049834,  0.2146448 , -0.32785131, -1.08990638, -0.75152502])
"""

# 生成随机整数，从1-20中随机10个
np.random.randint(1,20,10)
"""
array([12,  6,  4,  3, 13, 19,  5,  4, 14, 16])
"""
```



### 2.2.3 数组属性

```python
a
"""
  array([ 1.  ,  1.45,  1.9 ,  2.35,  2.8 ,  3.25,  3.7 ,  4.15,  4.6 ,5.05,  5.5 ,  5.95,  6.4 ,  6.85,  7.3 ,  7.75,  8.2 ,  8.65,9.1 ,  9.55, 10.  ])
"""

#查看类型
type(a)
#numpy.ndarray

#查看数组中的数据类型：(data type)
a.dtype
#dtype('float64')

#查看形状，会返回一个元组，每个元素代表这一维的元素数目：
a.shape
#(4,)
#或者使用
np.shape(a)
#(4,)

#要看数组里面元素的个数：
a.size
#4

#查看数组维度：(n dimension)
a.ndim
#1
```



### 2.2.4 索引和切片

和列表相似，数组也支持索引和切片操作。

```python
#使用索引
a = np.array([0,1,2,3])
a[0]
#0

#修改元素
a[0] = 10
a
#array([10,  1,  2,  3])

#切片，支持负索引：
a = np.array([11,12,13,14,15])
a[1:3] #左闭右开，从0开始算
#array([12, 13])

a[1:-2] 
a[-4:3]
#等价于a[1:3]
array([12, 13])

#省略参数：
a[-2:] #从倒数第2个取到底
#array([14, 15])
a[::2] #从头取到尾，间隔2
#array([11,13,15])
#步长

```

假设我们记录一部电影的累计票房：
```python
ob = np.array([21000,21800,22240,23450,25000])
ob
#array([21000, 21800, 22240, 23450, 25000])

#可以这样计算每天的票房：利用错位相减
ob2 = ob[1:]-ob[:-1]
ob2
#array([ 800,  440, 1210, 1550])
```

### 2.2.5 多维数组及其属性
array还可以用来生成和处理多维数组：
```python
#生成多维数组
a = np.array([[0,1,2,3],[10,11,12,13]])
a
#array([[ 0,  1,  2,  3],[10, 11, 12, 13]])
#事实上我们传入的是一个以列表为元素的列表，最终得到一个二维数组。

#查看形状
a.shape
#(2, 4)
#2维，每维4元素

查看总的元素个数：
a.size
#8

查看维数：
a.ndim
#2
```

### 2.2.6 多维数组索引
对于二维数组，可以传入两个数字来索引：
```python
a
#array([[ 0,  1,  2,  3],[10, 11, 12, 13]])

a[1,3]
#13 
#其中，1是行索引，3是列索引，中间用逗号隔开。事实上，Python会将它们看成一个元组（1,3），然后按照顺序进行对应。

#可以利用索引给它赋值：
a[1,3] = -1
a
#array([[ 0,  1,  2,  3],[10, 11, 12, -1]])

#事实上，我们还可以使用单个索引来索引一整行内容：与C有点类似了
a[1]
#array([10, 11, 12, -1])

#Python会将这单个元组当成对第一维的索引，然后返回对应的内容。
#记住：行前列后
a[:,1]
#array([ 1, 11])
```

### 2.2.7 多维数组切片
多维数组，也支持切片操作：
```python
a = np.array([[0,1,2,3,4,5],[10,11,12,13,14,15],[20,21,22,23,24,25],[30,31,32,33,34,35],[40,41,42,43,44,45],[50,51,52,53,54,55]])
a
"""
array([[ 0,  1,  2,  3,  4,  5],
[10, 11, 12, 13, 14, 15],
[20, 21, 22, 23, 24, 25],
[30, 31, 32, 33, 34, 35],
[40, 41, 42, 43, 44, 45],
[50, 51, 52, 53, 54, 55]])
"""

#想得到第一行的第4和第5两个元素：
a[0,3:5]
#array([3, 4])

#得到最后两行的最后两列：
a[4:,4:]
#array([[44, 45],[54, 55]])

#得到第三列：
a[:,2]
#array([ 2, 12, 22, 32, 42, 52])

#每一维都支持切片的规则，包括负索引，省略
#[lower:upper:step]

例如，取出3,5行的奇数列：
a[2::2,::2]
#array([[20, 22, 24],[40, 42, 44]])

```

### 2.2.8 切片是引用
切片在内存中使用的是引用机制
引用机制意味着，Python并没有为b分配新的空间来存储它的值，而是让b指向了a所分配的内存空间：
```python
a = np.array([0,1,2,3,4])
b = a[2:4]
print(b)
#[2 3]

#因此，改变b会改变a的值：
b[0] = 10
a
#array([ 0,  1, 10,  3,  4])

#而这种现象在列表中并不会出现：
a = [1,2,3,4,5]
b = a[2:4]
b[0] = 10
print(a)
#[1, 2, 3, 4, 5]

"""
这样做的好处在于，对于很大的数组，不用大量复制多余的值，节约了空间。
缺点在于，可能出现改变一个值改变另一个值的情况。
"""

#一个解决方法是使用copy()方法产生一个复制，这个复制会申请新的内存：
a = np.array([0,1,2,3,4])
b = a[2:4].copy()
b[0] = 10
a
#array([0, 1, 2, 3, 4])
```

### 2.2.9 花式索引
切片只能支持连续或者等间隔的切片操作，要想实现任意位置的操作。需要使用花式索引（fancy slicing）
之所以称之为“花式”索引，主要是因为与传统的基于单个标签或标签范围的索引方法相比，它允许执行更复杂、更“花哨”的数据选择操作。使用花式索引，你可以非连续地选择数据的特定部分，或者按照特定顺序选择行或列，这些操作对于数据分析和预处理尤其有用。

#### 2.2.9.1 一维花式索引
与range函数类似，我们可以使用arange函数来产生等差数组。
```python
#产生等差数组
a = np.arange(0,100,10)
a
#array([ 0, 10, 20, 30, 40, 50, 60, 70, 80, 90])

#花式索引需要指定索引位置：
index = [1,2,-3]
y = a[index]
print(y)
#[10 20 70]

#还可以使用布尔数组来花式索引：
mask = np.array([0,2,2,0,0,1,0,0,1,0],dtype = bool)
mask
"""
array([False,  True,  True, False, False,  True, False, False,  True, False])
"""

#mask必须是布尔数组，长度必须和数组长度相等。
a[mask]
#array([10, 20, 50, 80])
```

#### 2.2.9.2 二维花式索引
对于二维花式索引，我们需要给定行和列的值：
```python
a = np.array([[0,1,2,3,4,5],[10,11,12,13,14,15],[20,21,22,23,24,25],[30,31,32,33,34,35],[40,41,42,43,44,45],[50,51,52,53,54,55]])
a
"""
 array([[ 0,  1,  2,  3,  4,  5],
           [10, 11, 12, 13, 14, 15],
           [20, 21, 22, 23, 24, 25],
           [30, 31, 32, 33, 34, 35],
           [40, 41, 42, 43, 44, 45],
           [50, 51, 52, 53, 54, 55]])
"""
#返回的是一条次对角线上的5个值。

a[(0,1,2,3,4),(1,2,3,4,5)]
#array([ 1, 12, 23, 34, 45])
#返回的是最后三行的1,3,5列。

a[3:,[0,2,4]]
"""
array([[30, 32, 34],
           [40, 42, 44],
           [50, 52, 54]])
"""

#也可以使用mask进行索引：
mask = np.array([1,0,1,0,0,1],dtype = bool)
a[mask,2]
#array([ 2, 22, 52])
#与切片不同，花式索引返回的是原对象的一个复制而不是引用。
```

### 2.2.10 “不完全”索引 

只给定行索引的时候，返回整行：
```python
y = a[:3]
y
"""
array([[ 0,  1,  2,  3,  4,  5],
           [ 1,  1,  1,  1,  1,  1],
           [20, 21, 22, 23, 24, 25]])
"""

#这时候也可以使用花式索引取出第2,3,5行：
con = np.array([0,1,1,0,1,0],dtype = bool)
a[con]
"""
array([[ 1,  1,  1,  1,  1,  1],
           [20, 21, 22, 23, 24, 25],
           [40, 41, 42, 43, 44, 45]])
"""
```

### 2.2.11 where语句
```python
where(array)
#where函数会返回所有非零元素的索引。
```

#### 2.2.11.1 一维数组
```python
#先看一维的例子：
a = np.array([0,12,5,20])

#判断数组中的元素是不是大于10：
a>10
#array([False,  True, False,  True])

#数组中所有大于10的元素的索引位置：
np.where(a>10)
#(array([1, 3], dtype=int64),)
#注意到where的返回值是一个元组。返回的是索引位置，索引[1,3]大于10的数

#也可以直接用数组操作:
a[a>10]
#array([12, 20])

a[np.where(a>10)]
#array([12,20])
```

## 2.3 数组类型
### 2.3.1 具体如下：

| **基本类型** |                      **可用的Numpy类型** |                                         **备注** |
| -----------: | ---------------------------------------: | -----------------------------------------------: |
|       布尔型 |                                     bool |                                       占一个字节 |
|         整型 |        int8,int16,int32,int64,int128,int |                           int跟C语言中long一样大 |
|   无符号整型 |  uint8,uint16,uint32,uint64,uint128,uint |               uint跟C语言中的unsigned long一样大 |
|       浮点数 |                    float16,float32,float | 默认为双精度float64，longfloat精度大小与系统有关 |
|         复数 | complex64,complex128,complex,longcomplex |            默认为complex128,即实部虚部都为双精度 |
|       字符串 |                           string,unicode |        可以使用dtype=S4表示一个4字节字符串的数组 |
|         对象 |                                   object |                             数组中可以使用任意值 |
|         时间 |                   datetime64,timedelta64 |                                                  |

### 2.3.2 类型转换
trans.py
```python
a = np.array([1.5,-3],dtype = float)
a
#array([ 1.5, -3. ])

```

### 2.3.3 asarray 函数
asarray.py
```python
a = np.array([1,2,3])
np.asarray(a,dtype = float)#强制转换为浮点型
#array([1., 2., 3.])
```

### 2.3.4 astype 方法
astype.py
```python
a = np.array([1,2,3])
a.astype(float)
#array([1., 2., 3.])
```
此处a本身并未发生变化，因为这是一个拷贝的形式

## 2.4 数组操作
以豆瓣10部高分电影为例 
movies.py
```python
#电影名称
mv_name = ["肖申克的救赎","控方证人","美丽人生","阿甘正传","霸王别姬","泰坦尼克号","辛德勒的名单","这个杀手不太冷","疯狂动物城","海豚湾"]

#评分人数
mv_num = np.array([692795,42995,327855,580897,478523,157074,306904,662552,284652,159302])

#评分
mv_score = np.array([9.6,9.5,9.5,9.4,9.4,9.4,9.4,9.3,9.3,9.3])

#电影时长（分钟）
mv_length = np.array([142,116,116,142,171,194,195,133,109,92])

```

### 2.4.1 数组排序
#### 2.4.1.1 sort函数
sort.py
```python
np.sort(mv_num)#sort不改变原来数组
```

#### 2.4.1.2 argsort函数
argsort返回从小到大的排列在数组中的索引位置：
argsort.py
```python
order = np.argsort(mv_num)
order
#array([1, 5, 9, 8, 6, 2, 4, 3, 7, 0], dtype=int64)

```

### 2.4.2 数组求和（sum函数/方法）
sum.py
```python
np.sum(mv_num)

mv_num.sum()
```

### 2.4.3 求最值（max/min函数/方法）
max_min.py
```python
np.max(mv_length)

np.min(mv_score)

mv_length.max()

mv_score.min()
```

### 2.4.4 求均值和标准差（mean/std函数/方法）
mean_std.py
```python
np.mean(mv_length)

mv_length.mean()

np.std(mv_length)

mv_length.std()
```

### 2.4.5 相关系数矩阵（cov函数）
cov.py
```python
np.cov(mv_score,mv_length)
```

相关系数矩阵是一个用于衡量多个变量之间线性相关程度的矩阵，其中每个元素代表了一对变量之间的相关系数。这种矩阵通常用于统计分析和数据科学领域，以帮助识别数据中变量之间的关系。

#### 2.4.5.1 相关系数

在讨论相关系数矩阵之前，首先需要理解相关系数的概念。相关系数是一个介于-1和1之间的数值，用于量化两个变量之间的线性关系强度和方向。最常用的相关系数包括皮尔逊相关系数（Pearson correlation coefficient）和斯皮尔曼等级相关系数（Spearman's rank correlation coefficient）。

- 当相关系数接近1时，表示两个变量之间存在强正相关；
- 当相关系数接近-1时，表示两个变量之间存在强负相关；
- 当相关系数接近0时，表示两个变量之间没有线性相关。

#### 2.4.5.2 相关系数矩阵

相关系数矩阵是一个方阵，其行数和列数等于分析中涉及的变量数量。矩阵的每个元素是对应行变量和列变量之间的相关系数。对于矩阵中的任意元素(r_{ij})，它表示的是第(i)个变量与第(j)个变量之间的相关系数。

由于任一变量与其自身的相关系数总是1，因此相关系数矩阵的对角线元素总是1。此外，相关系数矩阵是对称的，因为(r_{ij} = r_{ji})。

**示例**

假设有三个变量X、Y和Z，其相关系数矩阵可能如下所示：

$ \begin{bmatrix} 1 & r_{xy} & r_{xz} \ r_{yx} & 1 & r_{yz} \ r_{zx} & r_{zy} & 1 \end{bmatrix} $

其中，(r_{xy})表示X和Y之间的相关系数，(r_{xz})表示X和Z之间的相关系数，以此类推。

**应用**

相关系数矩阵在多个领域有广泛的应用，包括但不限于：

- **数据分析**：通过观察变量之间的相关性，可以帮助识别数据中的潜在模式或关系。
- **特征选择**：在机器学习和模型构建过程中，相关系数矩阵可以用来识别并排除高度相关的特征变量，以减少多重共线性问题。

### 2.4.6 矩阵加减乘除

**矩阵和矩阵(向量)相乘：` (M行, N列)*(N行, L列) = (M行, L列)`**

```python
# 矩阵加法
np.add(A, B)

# 矩阵减法
np.subtract(A, B)

# 矩阵乘法
# 在进行矩阵乘法时，前一个矩阵的列数必须等于后一个矩阵的行数，才能进行乘法运算
# (M行, N列)*(N行, L列) = (M行, L列)
p.dot(A, B)

# 矩阵除法
np.divide(A, B)
```
```python
import numpy as np

# 创建矩阵A和B
A = np.array([[1, 2], [3, 4]])
B = np.array([[5, 6], [7, 8]])

print("A + B:")
print(np.add(A, B))
[1, 2]  	[5, 6]		[6, 8]
		+  			=  
[3, 4]		[7, 8]		[10, 12]


print("A - B:")
print(np.subtract(A, B))
[1, 2]  	[5, 6]		[-4, -4]
		-  			=  
[3, 4]		[7, 8]		[-4, -4]

print("A * B:")
print(np.dot(A, B))
[1, 2]  	[5, 6]		[19, 22]
		*  			=  
[3, 4]		[7, 8]		 [43, 50]

print("A / B:")
print(np.divide(A, B))
[1, 2]  	[5, 6]		[0.2,  0.33333333]
		/  			=  
[3, 4]		[7, 8]		[0.42857143, 0.5]

```

### 2.4.7 矩阵向量乘法
m×n 的矩阵乘以 n×1 的向量，得到的是 m×1 的向量
```python
[1, 2]  	[1]			[19]
		*  			=  
[3, 4]		[1]			 [43]

```

### 2.4.8 矩阵求逆
使用numpy.linalg.inv()函数进行矩阵求逆操作
```python
import numpy as np

# 创建矩阵
matrix = np.array([[1, 2], [3, 4]])

# 求逆矩阵
result = np.linalg.inv(matrix)

print(result)
```

### 2.4.9 矩阵求迹
使用numpy.trace()函数可以计算矩阵的迹
```python
import numpy as np

# 创建矩阵
matrix = np.array([[1, 2], [3, 4]])

# 计算矩阵的迹
result = np.trace(matrix)

print(result)

```

### 2.4.10 向量点积
使用numpy.dot()函数进行向量点积操作
```python
import numpy as np

# 创建两个向量
vector1 = np.array([1, 2])
vector2 = np.array([3, 4])

# 向量点积
result = np.dot(vector1, vector2)

print(result)

```

### 2.4.11 向量范数
使用numpy.linalg.norm()函数可以计算向量的范数
```python
import numpy as np

# 创建向量
vector = np.array([1, 2, 3])

# 计算向量的L2范数
result = np.linalg.norm(vector)

print(result)

```

### 2.4.12 矩阵存取

### 2.4.13 解线性方程组

```python
import numpy as np

a = np.array([[2, 3], [4, 5]])
b = np.array([5, 6])

x = np.linalg.solve(a, b)

print(x) # [-4.  5.]

```

### 2.4.14 矩阵广播机制 ？

**广播机制**是Numpy中的一个重要特性，是指**对ndarray执行某些数值计算时（这里是指矩阵间的数值计算，对应位置元素1对1执行标量运算，而非线性代数中的矩阵间运算），可以确保在数组间形状不完全相同时可以自动的通过广播机制扩散到相同形状，进而执行相应的计算功能**。

当然，这里的广播机制是有条件的，而非对任意形状不同的数组都能完成自动广播，显然，理解这里的"条件"是理解广播机制的核心原理。

维度相等时相当于**无需广播**，所以严格的说广播仅适用于某一维度从1广播到N；如果当前维度满足广播要求，则同时前移一个维度继续比较，直至首先完成其中一个矩阵的所有维度——另一矩阵如果还有剩余的话，其实也无所谓了，这很好理解。

## 2.5 数组

### 2.5.1 数组形状

ndim_shape.py
```python
a = np.arange(6)
a
#array([0, 1, 2, 3, 4, 5])

a.shape=(2,3)
a
#array([[0, 1, 2],[3, 4, 5]])

a.shape
#(2, 3)

#与之对应的方法是reshape，但它不会修改原来数组的值，而是返回一个新的数组：
a = np.arange(6)
a.reshape(2,3)
#array([[0, 1, 2],[3, 4, 5]])

```

### 2.5.2 数组转置(T/transpose)
tp.py
```python
a = a.reshape(2,3)
a
#array([[0, 1, 2],[3, 4, 5]])

a.T
array([[0, 3],[1, 4],[2, 5]])

a.transpose() #只要没赋值给本身，a的数值不会变换
array([[0, 3],[1, 4],[2, 5]])

```

### 2.5.3 数组连接
有时候我们需要将不同的数组按照一定的顺序连接起来：  
concatenate((a0,a1,...,aN),axis = 0)

**注意，这些数组要用()包括到一个元组中去。除了给定的轴外，这些数组其他轴的长度必须是一样的。**
connect.py
```python
x = np.array([[0,1,2],[10,11,12]])
y = np.array([[50,51,52],[60,61,62]])
print(x.shape)
print(y.shape)

"""
(2, 3)
(2, 3)
"""

#默认沿着第一维进行连接：
z = np.concatenate((x,y))
z
"""
 array([[ 0,  1,  2],
           [10, 11, 12],
           [50, 51, 52],
           [60, 61, 62]])
"""

#沿着第二维进行连接：
z = np.concatenate((x,y),axis = 1)
z

"""
 array([[ 0,  1,  2, 50, 51, 52],
[10, 11, 12, 60, 61, 62]])
"""

#注意到这里x和y的形状是一样的，还可以将它们连接成三维的数组，但concatenate不能提供这样的功能，不过可以这样：
z = np.array((x,y))
z
"""
array([[[ 0,  1,  2],
[10, 11, 12]],  
[[50, 51, 52],
[60, 61, 62]]])
"""
```



事实上，Numpy提供了分别对应这三种情况的函数：
* vstack
* hstack
* dstack

stack.py

```python
np.vstack((x,y))

np.dstack((x,y))
```

**NumPy的线性代数模块（numpy.linalg）提供了许多矩阵运算函数，如矩阵乘法、求逆、行列式、特征值等，该库包含了线性代数所需的所有功能。**

np.dot(a, b)：                 两个数组的点积，即元素对应相乘
np.matmul(a, b)                两个数组的矩阵积
np.linalg.inv(a)               计算矩阵的逆
np.linalg.det(a)               计算矩阵的行列式
np.linalg.eig(a)               计算矩阵的特征值和特征向量
np.linalg.solve(a, b)          解线性方程组 ax=b



## 2.6 Numpy内置函数

```python
a = np.array([-1,2,3,-2])

np.abs(a) #绝对值

np.exp(a) #指数

np.median(a) #中值

np.cumsum(a) #累积和
```

不要死记，查资料：

https://blog.csdn.net/nihaoxiaocui/article/details/51992860?locationNum=5&fps=1



## 2.7 数组属性方法总结

|            **调用方法** |                                         **作用** |
| ----------------------: | -----------------------------------------------: |
|                   **1** |                                     **基本属性** |
|                 a.dtype |                    数组元素类型float32,uint8,... |
|                 a.shape |                              数组形状(m,n,o,...) |
|                  a.size |                                       数组元素数 |
|              a.itemsize |                                 每个元素占字节数 |
|                a.nbytes |                                 所有元素占的字节 |
|                  a.ndim |                                         数组维度 |
|                       - |                                                - |
|                   **2** |                                     **形状相关** |
|                  a.flat |                                 所有元素的迭代器 |
|             a.flatten() |                            返回一个1维数组的复制 |
|               a.ravel() |                           返回一个一维数组，高效 |
|      a.resize(new_size) |                                         改变形状 |
| a.swapaxes(axis1,axis2) |                               交换两个维度的位置 |
|     a.transpose(* axex) |                               交换所有维度的位置 |
|                     a.T |                              转置，a.transpose() |
|             a.squeeze() |                            去除所有长度为1的维度 |
|                       - |                                                - |
|                   **3** |                                     **填充复制** |
|                a.copy() |                               返回数组的一个复制 |
|           a.fill(value) |                         将数组的元组设置为特定值 |
|                       - |                                                - |
|                   **4** |                                         **转化** |
|              a.tolist() |                                 将数组转化为列表 |
|            a.tostring() |                                     转换为字符串 |
|         a.astype(dtype) |                                   转换为指定类型 |
|       a.byteswap(False) |                                   转换大小字节序 |
|   a.view(type_or_dtype) | 生成一个使用相同内存，但使用不同的表示方法的数组 |
|                       - |                                                - |
|                   **5** |                                     **查找排序** |
|             a.nonzero() |                           返回所有非零元素的索引 |
|         a.sort(axis=-1) |                                     沿某个轴排序 |
|      a.argsort(axis=-1) |                       沿某个轴，返回按排序的索引 |
|       a.searchsorted(b) |           返回将b中元素插入a后能保持有序的索引值 |
|                       - |                                                - |
|                   **6** |                                 **元素数学操作** |
|        a.clip(low,high) |                           将数值限制在一定范围内 |
|     a.round(decimals=0) |                                   近似到指定精度 |
|     a.cumsum(axis=None) |                                           累加和 |
|    a.cumprod(axis=None) |                                           累乘积 |
|                       - |                                                - |
|                   **7** |                                     **约简操作** |
|        a.sum(axis=None) |                                             求和 |
|       a.prod(axis=None) |                                             求积 |
|        a.min(axis=None) |                                           最小值 |
|        a.max(axis=None) |                                           最大值 |
|     a.argmin(axis=None) |                                       最小值索引 |
|     a.argmax(axis=None) |                                       最大值索引 |
|        a.ptp(axis=None) |                                   最大值减最小值 |
|       a.mean(axis=None) |                                           平均值 |
|        a.std(axis=None) |                                           标准差 |
|        a.var(axis=None) |                                             方差 |
|        a.any(axis=None) |                  只要有一个不为0，返回真，逻辑或 |
|        a.all(axis=None) |                      所有都不为0，返回真，逻辑与 |